<app-main-header></app-main-header>

<div class="summary-page">
  <div class="progress-wrapper">
    <app-checkout-progress [currentStep]="'summary'"></app-checkout-progress>
  </div>

  <div class="stage-title">
    <h1>Nyugtázás</h1>
    <div class="stage-title__underline"></div>
  </div>

  <!-- Email értesítés -->
  <div class="email-notice">
    <i class="fa-solid fa-envelope-circle-check"></i>
    <span>A számlát elküldtük az e-mail címedre.</span>
  </div>

  <!-- Adatok kártya — szerkesztő ikonok nélkül -->
  <div class="data-card">
    <div class="data-card__header">Adatok</div>
    <div class="data-card__body">
      <div class="data-section">
        <p class="data-name">{{ fullName }}</p>
        <p class="data-address">{{ fullAddress }}</p>
        <p class="data-notice">
          <i class="fa-solid fa-circle-info"></i>
          Munkaszüneti napokon a kiszállítás szünetel
        </p>
      </div>
      <div class="data-section data-section--right">
        <p class="data-label">Fizetési mód</p>
        <i class="fa-solid fa-money-bill payment-icon"></i>
      </div>
    </div>
  </div>

  <!-- Termék lista + összegzés -->
  <div class="summary-body">
    <div class="item-list-container">
      <div class="item-list-header">
        <span>Termék kép</span>
        <span>Márka</span>
        <span>Termék</span>
        <span>Mennyiség</span>
        <span>Összesen</span>
      </div>

      @for (item of cartItems(); track item.id) {
        <div class="cart-row">
          <div class="cart-row__image">
            @if (item.imageUrl) {
              <img [src]="item.imageUrl" [alt]="item.name" />
            } @else {
              <div class="cart-row__image-placeholder">
                <i class="fa-solid fa-gear"></i>
              </div>
            }
          </div>
          <div class="cart-row__brand">
            <span class="brand-badge">{{ item.brand || '—' }}</span>
          </div>
          <div class="cart-row__name">{{ item.name }}</div>
          <div class="cart-row__qty">{{ item.quantity }}</div>
          <div class="cart-row__total">{{ formatPrice(item.price * item.quantity) }}</div>
        </div>
        <hr class="row-divider" />
      }
    </div>

    <!-- Összegzés panel -->
    <div class="summary-panel">
      <div class="summary-panel__header">Összegzés</div>
      <div class="summary-panel__body">
        <p class="summary-count">
          <strong>{{ cartItems().length }} termék:</strong>
        </p>
        <ul class="summary-items">
          @for (item of cartItems(); track item.id) {
            <li>{{ item.name }}</li>
          }
        </ul>

        <div class="summary-row">
          <span>Összesen:</span><span>{{ formatPrice(subtotal()) }}</span>
        </div>
        <div class="summary-row">
          <span>Szállítási díj:</span>
          <span class="shipping-free">Ingyenes</span>
        </div>

        <hr class="summary-divider" />

        <div class="summary-row summary-row--total">
          <span>Végösszeg:</span>
          <span>
            {{ formatPrice(subtotal()) }}
            <i class="fa-solid fa-circle-info info-icon"></i>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
